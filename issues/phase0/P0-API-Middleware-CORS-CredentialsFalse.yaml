id: P0-API-Middleware-CORS-CredentialsFalse
phase: 0
layer: API
area: Middleware
action: CORS-CredentialsFalse
target_file: backend/app/main.py
test_file: backend/tests/test_cors_policy.py
depends_on: ["P0-API-Main-Scaffold"]
spec_refs:
  - "04b"  # API規約（CORS）
  - "05"   # バックエンド設計
estimated_loc: 10

specification:
  purpose: "CORS の allow_credentials を v1 仕様に合わせて False へ統一する。Origin 許可は環境変数 CORS_ORIGINS のみ。"

  content_requirements:
    - section: "CORS 設定"
      items:
        - "allow_credentials=False に設定"
        - "Allow-Headers に Authorization, Content-Type を含める（既存維持）"

output_format: "FastAPI アプリ初期化コード（main.py 変更）"

constraints:
  - "本番で過度に広いCORSを許可しない"

test_specification:
  validation:
    - "プリフライトで credentials を要求した場合に許可されないことを確認"
    - "許可OriginのみがAccess-Control-Allow-Originに反映される"

definition_of_done:
  - "main.py の CORS が allow_credentials=False に設定されている"
  - "CORSの基本テストがGREEN"
